import type { PortugalSpotSeed } from '@/types';

/**
 * Portugal surf spots from north to south (Generated from markdown).
 */
export const portugalSpots: PortugalSpotSeed[] = [
  {
    id: 'viana-do-castelo',
    name: 'Viana do Castelo',
    region: 'Viana do Castelo Area',
    country: 'PT',
    latitude: 41.69,
    longitude: -8.83,
  },
  {
    id: 'vila-praia-de-ancora',
    name: 'Vila Praia de Âncora',
    region: 'Viana do Castelo Area',
    country: 'PT',
    latitude: 41.68,
    longitude: -8.825,
  },
  {
    id: 'afife',
    name: 'Afife',
    region: 'Viana do Castelo Area',
    country: 'PT',
    latitude: 41.67,
    longitude: -8.82,
  },
  {
    id: 'moledo',
    name: 'Moledo',
    region: 'Viana do Castelo Area',
    country: 'PT',
    latitude: 41.66,
    longitude: -8.815,
  },
  {
    id: 'sauve-mar',
    name: 'Sauve Mar',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.5,
    longitude: -8.8,
  },
  {
    id: 'fao',
    name: 'Fão',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.49,
    longitude: -8.795,
  },
  {
    id: 'ofir',
    name: 'Ofir',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.48,
    longitude: -8.79,
  },
  {
    id: 'praia-nova',
    name: 'Praia Nova',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.47,
    longitude: -8.785,
  },
  {
    id: 'apulia',
    name: 'Apulia',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.46,
    longitude: -8.78,
  },
  {
    id: 'agucadoura',
    name: 'Agucadoura',
    region: 'Minho / Braga Coast',
    country: 'PT',
    latitude: 41.45,
    longitude: -8.775,
  },
  {
    id: 'povoa-do-varzim',
    name: 'Póvoa do Varzim',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.15,
    longitude: -8.68,
  },
  {
    id: 'vila-do-conde',
    name: 'Vila do Conde',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.14,
    longitude: -8.675,
  },
  {
    id: 'azurara',
    name: 'Azurara',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.13,
    longitude: -8.67,
  },
  {
    id: 'mindelo',
    name: 'Mindelo',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.12,
    longitude: -8.665,
  },
  {
    id: 'praia-de-labruge',
    name: 'Praia de Labruge',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.11,
    longitude: -8.66,
  },
  {
    id: 'praia-do-marreco',
    name: 'Praia do Marreco',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.1,
    longitude: -8.655,
  },
  {
    id: 'perafita',
    name: 'Perafita',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.09,
    longitude: -8.65,
  },
  {
    id: 'matosinhos',
    name: 'Matosinhos',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.08,
    longitude: -8.645,
  },
  {
    id: 'luz-porto',
    name: 'Luz (Porto)',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.07,
    longitude: -8.64,
  },
  {
    id: 'praia-de-lavadores',
    name: 'Praia de Lavadores',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.06,
    longitude: -8.635,
  },
  {
    id: 'praia-da-madalena',
    name: 'Praia da Madalena',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.05,
    longitude: -8.63,
  },
  {
    id: 'miramar',
    name: 'Miramar',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.04,
    longitude: -8.625,
  },
  {
    id: 'espinho',
    name: 'Espinho',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.03,
    longitude: -8.62,
  },
  {
    id: 'esmoriz',
    name: 'Esmoriz',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.02,
    longitude: -8.615,
  },
  {
    id: 'cortegaca',
    name: 'Cortegaça',
    region: 'Porto Region',
    country: 'PT',
    latitude: 41.01,
    longitude: -8.61,
  },
  {
    id: 'sao-jacinto',
    name: 'São Jacinto',
    region: 'Aveiro / Centro Norte',
    country: 'PT',
    latitude: 40.64,
    longitude: -8.75,
  },
  {
    id: 'praia-de-mira',
    name: 'Praia de Mira',
    region: 'Aveiro / Centro Norte',
    country: 'PT',
    latitude: 40.63,
    longitude: -8.745,
  },
  {
    id: 'figueira-da-foz',
    name: 'Figueira da Foz',
    region: 'Aveiro / Centro Norte',
    country: 'PT',
    latitude: 40.62,
    longitude: -8.74,
  },
  {
    id: 'nazare',
    name: 'Nazaré',
    region: 'Leiria / Oeste',
    country: 'PT',
    latitude: 39.6,
    longitude: -9.07,
  },
  {
    id: 'sao-martinho-do-porto',
    name: 'São Martinho do Porto',
    region: 'Leiria / Oeste',
    country: 'PT',
    latitude: 39.59,
    longitude: -9.065,
  },
  {
    id: 'consolacao',
    name: 'Consolação',
    region: 'Leiria / Oeste',
    country: 'PT',
    latitude: 39.58,
    longitude: -9.06,
  },
  {
    id: 'lagide',
    name: 'Lagide',
    region: 'Leiria / Oeste',
    country: 'PT',
    latitude: 39.57,
    longitude: -9.055,
  },
  {
    id: 'vila-nova',
    name: 'Vila Nova',
    region: 'Leiria / Oeste',
    country: 'PT',
    latitude: 39.56,
    longitude: -9.05,
  },
  {
    id: 'baleal',
    name: 'Baleal',
    region: 'Peniche',
    country: 'PT',
    latitude: 39.35,
    longitude: -9.38,
  },
  {
    id: 'supertubos',
    name: 'Supertubos',
    region: 'Peniche',
    country: 'PT',
    latitude: 39.34,
    longitude: -9.375,
  },
  {
    id: 'ribeira-d-ilhas',
    name: 'Ribeira D\'Ilhas',
    region: 'Ericeira',
    country: 'PT',
    latitude: 38.96,
    longitude: -9.42,
  },
  {
    id: 'matadouro',
    name: 'Matadouro',
    region: 'Ericeira',
    country: 'PT',
    latitude: 38.95,
    longitude: -9.415,
  },
  {
    id: 'coxos',
    name: 'Coxos',
    region: 'Ericeira',
    country: 'PT',
    latitude: 38.94,
    longitude: -9.41,
  },
  {
    id: 'reef',
    name: 'Reef',
    region: 'Ericeira',
    country: 'PT',
    latitude: 38.93,
    longitude: -9.405,
  },
  {
    id: 'sao-lourenco',
    name: 'São Lourenco',
    region: 'Ericeira',
    country: 'PT',
    latitude: 38.92,
    longitude: -9.4,
  },
  {
    id: 'foz-de-lizandro',
    name: 'Foz de Lizandro',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.7,
    longitude: -9.4,
  },
  {
    id: 'praia-das-macas',
    name: 'Praia das Maçãs',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.69,
    longitude: -9.395,
  },
  {
    id: 'praia-dos-lagosteiros',
    name: 'Praia dos Lagosteiros',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.68,
    longitude: -9.39,
  },
  {
    id: 'bicas',
    name: 'Bicas',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.67,
    longitude: -9.385,
  },
  {
    id: 'praia-dos-frades',
    name: 'Praia dos Frades',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.66,
    longitude: -9.38,
  },
  {
    id: 'praia-formosa',
    name: 'Praia Formosa',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.65,
    longitude: -9.375,
  },
  {
    id: 'sao-pedro-do-estoril',
    name: 'São Pedro do Estoril',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.64,
    longitude: -9.37,
  },
  {
    id: 'paco-de-arcos',
    name: 'Paco de Arcos',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.63,
    longitude: -9.365,
  },
  {
    id: 'santo-amaro',
    name: 'Santo Amaro',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.62,
    longitude: -9.36,
  },
  {
    id: 'praia-de-torre',
    name: 'Praia de Torre',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.61,
    longitude: -9.355,
  },
  {
    id: 'praia-da-laje',
    name: 'Praia da Laje',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.6,
    longitude: -9.35,
  },
  {
    id: 'carcavelos',
    name: 'Carcavelos',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.59,
    longitude: -9.345,
  },
  {
    id: 'parede',
    name: 'Parede',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.58,
    longitude: -9.34,
  },
  {
    id: 'praia-de-caxias',
    name: 'Praia de Caxias',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.57,
    longitude: -9.335,
  },
  {
    id: 'praia-da-cruz-quebrada',
    name: 'Praia da Cruz Quebrada',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.56,
    longitude: -9.33,
  },
  {
    id: 'praia-do-guincho',
    name: 'Praia do Guincho',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.55,
    longitude: -9.325,
  },
  {
    id: 'praia-da-areia-branca',
    name: 'Praia da Areia Branca',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.54,
    longitude: -9.32,
  },
  {
    id: 'praia-do-abano',
    name: 'Praia do Abano',
    region: 'Lisboa / Cascais / Estoril',
    country: 'PT',
    latitude: 38.53,
    longitude: -9.315,
  },
  {
    id: 'cova-do-vapor',
    name: 'Cova do Vapor',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.6,
    longitude: -9.2,
  },
  {
    id: 'marcelino',
    name: 'Marcelino',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.59,
    longitude: -9.195,
  },
  {
    id: 'sao-joao-da-caparica',
    name: 'São João da Caparica',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.58,
    longitude: -9.19,
  },
  {
    id: 'costa-da-caparica',
    name: 'Costa da Caparica',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.57,
    longitude: -9.185,
  },
  {
    id: 'praia-da-saude',
    name: 'Praia da Saúde',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.56,
    longitude: -9.18,
  },
  {
    id: 'castelo',
    name: 'Castelo',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.55,
    longitude: -9.175,
  },
  {
    id: 'praia-da-cornelia',
    name: 'Praia da Cornelia',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.54,
    longitude: -9.17,
  },
  {
    id: 'fonte-da-telha',
    name: 'Fonte da Telha',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.53,
    longitude: -9.165,
  },
  {
    id: 'praia-do-pescador',
    name: 'Praia do Pescador',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.52,
    longitude: -9.16,
  },
  {
    id: 'praia-do-rei',
    name: 'Praia do Rei',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.51,
    longitude: -9.155,
  },
  {
    id: 'praia-da-rainha',
    name: 'Praia da Rainha',
    region: 'Costa da Caparica',
    country: 'PT',
    latitude: 38.5,
    longitude: -9.15,
  },
  {
    id: 'lagoa-de-albufeira',
    name: 'Lagoa de Albufeira',
    region: 'Setúbal / Arrábida',
    country: 'PT',
    latitude: 38.4,
    longitude: -9.0,
  },
  {
    id: 'cantinho-da-baia',
    name: 'Cantinho da Baía',
    region: 'Setúbal / Arrábida',
    country: 'PT',
    latitude: 38.39,
    longitude: -8.995,
  },
  {
    id: 'sines',
    name: 'Sines',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.9,
    longitude: -8.8,
  },
  {
    id: 'porto-covo',
    name: 'Porto Covo',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.89,
    longitude: -8.795,
  },
  {
    id: 'cogumelo',
    name: 'Cogumelo',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.88,
    longitude: -8.79,
  },
  {
    id: 'praia-do-brejo-largo',
    name: 'Praia do Brejo Largo',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.87,
    longitude: -8.785,
  },
  {
    id: 'praia-de-almograve',
    name: 'Praia de Almograve',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.86,
    longitude: -8.78,
  },
  {
    id: 'praia-da-vieirinha',
    name: 'Praia da Vieirinha',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.85,
    longitude: -8.775,
  },
  {
    id: 'praia-dos-alteirinhos',
    name: 'Praia dos Alteirinhos',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.84,
    longitude: -8.77,
  },
  {
    id: 'praia-de-nossa-senhora',
    name: 'Praia de Nossa Senhora',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.83,
    longitude: -8.765,
  },
  {
    id: 'zambujeira-do-mar',
    name: 'Zambujeira do Mar',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.82,
    longitude: -8.76,
  },
  {
    id: 'praia-das-furnas',
    name: 'Praia das Furnas',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.81,
    longitude: -8.755,
  },
  {
    id: 'praia-do-burrinho',
    name: 'Praia do Burrinho',
    region: 'Alentejo Coast',
    country: 'PT',
    latitude: 37.8,
    longitude: -8.75,
  },
  {
    id: 'odeceixe',
    name: 'Odeceixe',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.3,
    longitude: -8.8,
  },
  {
    id: 'amoreira',
    name: 'Amoreira',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.29,
    longitude: -8.795,
  },
  {
    id: 'carriagem',
    name: 'Carriagem',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.28,
    longitude: -8.79,
  },
  {
    id: 'vale-figueiras',
    name: 'Vale Figueiras',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.27,
    longitude: -8.785,
  },
  {
    id: 'arrifana',
    name: 'Arrifana',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.26,
    longitude: -8.78,
  },
  {
    id: 'monte-clerigo',
    name: 'Monte Clérigo',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.25,
    longitude: -8.775,
  },
  {
    id: 'praia-dos-mouranitos',
    name: 'Praia dos Mouranitos',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.24,
    longitude: -8.77,
  },
  {
    id: 'praia-da-murracao',
    name: 'Praia da Murração',
    region: 'Costa Vicentina (Aljezur)',
    country: 'PT',
    latitude: 37.23,
    longitude: -8.765,
  },
  {
    id: 'praia-do-telheiro',
    name: 'Praia do Telheiro',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 37.0,
    longitude: -8.9,
  },
  {
    id: 'praia-da-ponta-ruiva',
    name: 'Praia da Ponta Ruiva',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.99,
    longitude: -8.895,
  },
  {
    id: 'praia-castelejo',
    name: 'Praia Castelejo',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.98,
    longitude: -8.89,
  },
  {
    id: 'praia-da-cordoama',
    name: 'Praia da Cordoama',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.97,
    longitude: -8.885,
  },
  {
    id: 'carrapateira',
    name: 'Carrapateira',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.96,
    longitude: -8.88,
  },
  {
    id: 'praia-do-amado',
    name: 'Praia do Amado',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.95,
    longitude: -8.875,
  },
  {
    id: 'tonel',
    name: 'Tonel',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.94,
    longitude: -8.87,
  },
  {
    id: 'beliche',
    name: 'Beliche',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.93,
    longitude: -8.865,
  },
  {
    id: 'mareta',
    name: 'Mareta',
    region: 'Sagres Area',
    country: 'PT',
    latitude: 36.92,
    longitude: -8.86,
  },
];

/**
 * Haversine distance between two lat/lon points, returns km.
 */
export function haversineKm(
  lat1: number, lon1: number,
  lat2: number, lon2: number,
): number {
  const R = 6371;
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLon = ((lon2 - lon1) * Math.PI) / 180;
  const a =
    Math.sin(dLat / 2) ** 2 +
    Math.cos((lat1 * Math.PI) / 180) *
      Math.cos((lat2 * Math.PI) / 180) *
      Math.sin(dLon / 2) ** 2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
}

/**
 * Return the N nearest spots to a given home spot, excluding the home spot itself.
 */
export function getNearestSpots(
  allSpots: PortugalSpotSeed[],
  homeSpotId: string,
  limit = 5,
): PortugalSpotSeed[] {
  const home = allSpots.find(s => s.id === homeSpotId);
  if (!home) return allSpots.slice(0, limit);

  return allSpots
    .filter(s => s.id !== homeSpotId)
    .map(s => ({
      spot: s,
      dist: haversineKm(home.latitude, home.longitude, s.latitude, s.longitude),
    }))
    .sort((a, b) => a.dist - b.dist)
    .slice(0, limit)
    .map(w => w.spot);
}
